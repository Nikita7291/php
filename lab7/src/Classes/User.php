<?php
namespace src\Classes;

/**
 * Базовый класс User определяет ключевой профиль участника системы.
 * * Инкапсулирует персональные данные (имя, логин, пароль) и логику их отображения.
 * Включает механизм оповещения при завершении жизненного цикла объекта.
 * * @package src\Classes
 */
class User
{
    /**
     * Инициализация объекта через механизм Constructor Property Promotion.
     * * Автоматически регистрирует переданные аргументы как свойства экземпляра.
     * Устанавливает различные уровни доступа (public/private) для данных профиля.
     * * @param string $name Отображаемое имя
     * @param string $login Уникальное имя входа
     * @param string $password Конфиденциальный пароль
     */
    public function __construct(
        public string $name,
        public string $login,
        private string $password
    ) {
        // Тело конструктора пустое, так как свойства инициализированы в заголовке
    }

    /**
     * Формирует визуальное представление данных пользователя.
     * * Генерирует фрагмент HTML-разметки для вывода основных реквизитов на экран.
     * Метод открыт для расширения в дочерних классах.
     * * @return string Разметка с данными пользователя
     */
    public function showInfo(): string
    {
        return "<div class=\"user-info\">
                    <h3>User Info</h3>
                    <p><strong>Name:</strong> {$this->name}</p>
                    <p><strong>Login:</strong> {$this->login}</p>
                </div>";
    }

    /**
     * Финализатор объекта (деструктор).
     * * Срабатывает в момент уничтожения ссылки на объект или при завершении работы скрипта.
     * Служит для информирования о высвобождении ресурсов, связанных с аккаунтом.
     */
    public function __destruct()
    {
        echo "<p>Пользователь {$this->login} удален.</p>";
    }
}